orbs:
  react: thefrontside/react@0.2.0
version: 2.1
jobs:
  deploy:
    machine:
        enabled: true
    steps:
      - run:
          name: Deploy Over SSH
          command: ssh -p 43002 $SSH_USER@$SSH_HOST "cd /var/www/html/courses-viewer-app; git pull;"

workflows:
  tests:
    jobs:
      - react/install
      - react/eslint:
          requires:
            - react/install
      - react/test:
          requires:
            - react/install
      - react/coverage:
          requires:
            - react/install
      - deploy:
          requires:
            - react/eslint
            - react/test
            - react/coverage
          

# orbs:
#     heroku: circleci/heroku@0.0.10
#     node: circleci/node@4.1.0
# version: 2.1

# # Define the jobs we want to run for this project
# jobs:
#   test:
#     - node/test
#   deploy:
#     - heroku/deploy-via-git:

# # Orchestrate our job run sequence
# workflows:
#   test-and-deploy:
#     jobs:
#       - node/test
#       - heroku/deploy-via-git:
#           filters:
#             branches:
#               only:
#                 - main
#           requires:
#             - node/test